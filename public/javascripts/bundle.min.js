var app_focus,escapeHtml,frq,messages,ready,username;console.log("app.coffee"),console.log("chat.coffee"),console.log("config.coffee"),console.log("login_ctrl.coffee"),console.log("main_ctrl.coffee"),console.log("routes.coffee"),ready=void 0,app_focus=void 0,frq="1",username="User_"+Math.floor(11e4*Math.random()),messages=0,escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},$(document).ready(function(){var a,b,c;return c=io(),b=function(){var b,d;return b=$("#msg").val(),""!==b?(a(b,username,!0),d={msg:b,frq:frq},c.emit("send",JSON.stringify(d))):void 0},a=function(a,b,c){var d,e;return d="",c&&(d="me-msg"),$("<li class='msg-container'><strong><span class='username-label'> "+b+" </span></strong>:  "+escapeHtml(a).substring(0,512)+" </li>").appendTo("#msgs").addClass(d).show("fast"),$("#msg").val(""),e=$(document).height(),$("html, body").animate({scrollTop:e},50)},$("#chat").hide(),$("#name").focus(),$("form").submit(function(a){return a.preventDefault()}),$("#join").click(function(){var a;return""!==$("#name").val()&&(username=$("#name").val()),""!==$("#frq").val()&&(frq=$("#frq").val()),a={username:username,frq:frq},c.emit("join",JSON.stringify(a)),$("#msgs").append("<li>Connecting...</li>"),$("#login-container").hide(),$("#chat").show("slow"),$("#msg").focus(),ready=!0}),$("#send").click(function(){return b()}),$("#msg").keypress(function(a){return 13===a.which?b():void 0}),c.on("update",function(a){return ready?$("#msgs").append("<li>"+a+"</li>"):void 0}),c.on("user_join",function(a){return console.log("NEW USER JOINED"),console.log(a)}),c.on("chat",function(b,c){return ready?(app_focus===!0&&(messages+=1,console.log("changing title..."),document.title="("+messages+") KawaChat"),a(c,b)):void 0}),c.on("disconnect",function(){return $("#msgs").append("<li class='msg-container'><strong><span class='text-warning'>The server is not available</span></strong></li>"),$("#msg").attr("disabled","disabled"),$("#send").attr("disabled","disabled")}),$(window).focus(function(){return document.title="KawaChat",app_focus=!0,console.log("focus"),messages=0}).blur(function(){return console.log("!focus"),app_focus=!1})});